监控工具：哨兵监控平台

监控项：基础 + 磁盘



监控项说明：

理解磁盘IO可以从以下几个基本概念入手

**Util：对应哨兵磁盘Util**

Util即利用率，说明磁盘有多少时间是在处理IO请求，可用以衡量磁盘设备的繁忙程度。如图，device=vda Util：3.00，说明磁盘vda有百分之3的时间在处理IO请求。

**阀值说明：**存储类90% ，如nydus消息中间件；其他30%

![](/assets/5-3-1.png)

**  
**

**IOPS：对应哨兵disk IO TPS**

IO就是指从磁盘设备上读写数据。IOPS即IO设备上每秒的读写次数

**阀值说明：**视不同硬件设备而定，桌面盘 、企业盘 、SSD

![](/assets/5-3-2.png)

**BPS：对应哨兵disk io \(BPS\)**

BPS即IO设备上每秒传输的数据量，单位一般是字节或千字节等。BPS除以IOPS可以估计每次IO的平均数据大小。

**阀值说明：**视不同硬件设备而定，桌面盘 、企业盘 、SSD

![](/assets/5-3-3.png)



**await/服务时间（ms），一般会结合磁盘Util来判断设备的繁忙程度**

**await：**磁盘处理IO需要时间，从向设备提交IO请求到最终完成IO的时间可以用await来衡量。其中**包括了IO请求在处理队列中等待的时间**，这应该也是wait一次的由来吧。

**服务时间（ms）**：**平均每次设备I/O操作的服务时间 \(毫秒\)，**不包括队列等待的设备实际处理IO的时间了，其大小和磁盘硬件性能有关。

**await和服务时间（ms）**两者数值相差越大，说明队列等待时间越长，设备越繁忙。

![](/assets/5-3-4.png)



**顺序IO和随机IO**

顺序 IO 是指顺序读写数据，磁头在磁盘上基本上是顺序移动，比如数据库执行大量的查询、流媒体服务等；随机IO不同于顺序IO就是其读写数据的位置具有随机性，磁头频繁在不同的磁道上移动，它不依赖于请求数据的大小而主要看硬件本身的IO能力。我们可以用BPS来衡量顺序IO的性能，用IOPS来衡量随机IO的性能。

